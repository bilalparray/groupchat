<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Register</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <form #registerForm="ngForm" (ngSubmit)="submit(registerForm)" novalidate>
    <ion-list>
      <!-- Email -->
      <ion-item>
        <ion-label position="stacked">Email</ion-label>
        <ion-input type="email" name="email" required email [(ngModel)]="model.email" (blur)="onBlur('email')"
          [attr.autocomplete]="'email'">
        </ion-input>
      </ion-item>
      <div class="validation" *ngIf="showError('email')">
        <small *ngIf="!model.email || model.email.trim() === ''">Email is required.</small>
        <small *ngIf="model.email && !isValidEmail(model.email)">Enter a valid email address.</small>
      </div>

      <!-- Password -->
      <ion-item>
        <ion-label position="stacked">Password</ion-label>
        <ion-input type="password" name="password" required minlength="6" [(ngModel)]="model.password"
          (blur)="onBlur('password')" [attr.autocomplete]="'new-password'">
        </ion-input>
      </ion-item>
      <div class="validation" *ngIf="showError('password')">
        <small *ngIf="!model.password || model.password.trim() === ''">Password is required.</small>
        <small *ngIf="model.password && model.password.length < 6">Password must be at least 6 characters.</small>
      </div>

      <!-- Confirm Password -->
      <ion-item>
        <ion-label position="stacked">Confirm Password</ion-label>
        <ion-input type="password" name="confirmPassword" required minlength="6" [(ngModel)]="model.confirmPassword"
          (blur)="onBlur('confirmPassword')" [attr.autocomplete]="'new-password'">
        </ion-input>
      </ion-item>
      <div class="validation" *ngIf="showError('confirmPassword')">
        <small *ngIf="!model.confirmPassword || model.confirmPassword.trim() === ''">Confirm Password is
          required.</small>
        <small *ngIf="model.confirmPassword && model.confirmPassword.length < 6">Confirm Password must be at least 6
          characters.</small>
        <small *ngIf="model.confirmPassword && model.confirmPassword.length >= 6 && !passwordsMatch()">Passwords do not
          match.</small>
      </div>

      <ion-button expand="block" type="submit">Register</ion-button>

      <div class="links">
        <p>Already have an account? <a (click)="navigate('/login')">Login</a></p>
        <p><a (click)="navigate('/guest')">Join as Guest</a></p>
      </div>
    </ion-list>
  </form>
</ion-content>